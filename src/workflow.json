{
  "api": "4.1.0",
  "name": "gdal_demo",
  "vars": [
    {
      "id": "col1",
      "value": "-k2"
    },
    {
      "id": "col2",
      "value": "-k1"
    },
    {
      "id": "inputfiles",
      "value": [
        "/tmp/tiles/test/testtile0.xyz", "/tmp/tiles/test/testtile1.xyz"
        ]
    },
    {
      "id": "inputfile"
    },
    {
      "id": "warpedfiles"
    },
    {
      "id": "sorted_file"
    },
    {
      "id": "tif_file"
    },
    {
      "id": "transformed_file"
    },
    {
      "id": "outputfile"
    },
    {
      "id": "format",
      "value": "GTIFF"
    },
    {
      "id": "creation",
      "value": "'TILED=YES'"
    },
    {
      "id": "t_srs",
      "value": "EPSG:4326"
    },
    {
      "id": "outputdirectory"
    },
    {
      "id": "ctb_format",
      "value": "Mesh"
    },
    {
      "id": "extra1",
      "value": "-C"
    },
    {
      "id": "extra2",
      "value": "-N"
    },
    {
      "id": "extra3",
      "value": "-l"
    }
  ],
  "actions": [
    {
      "type": "for",
      "input": "inputfiles",
      "output": "warpedfiles",
      "enumerator": "inputfile",
      "yieldToOutput": "transformed_file",
      "actions": [
        {
          "type": "execute",
          "service": "sort",
          "inputs": [
            {
              "id": "column1",
              "var": "col1"
            },
            {
              "id": "column2",
              "var": "col2"
            },
            {
              "id": "input_file",
              "var": "inputfile"
            }
          ],
          "outputs": [
            {
              "id": "output_file",
              "var": "sorted_file"
            }
          ]
        },
        {
          "type": "execute",
          "service": "gdal_translate",
          "inputs": [
            {
              "id": "format",
              "var": "format"
            },
            {
              "id": "creation",
              "var": "creation"
            },
            {
              "id": "input_file",
              "var": "sorted_file"
            }
          ],
          "outputs": [
            {
              "id": "output_file",
              "var": "tif_file"
            }
          ]
        },
        {
          "type": "execute",
          "service": "gdalwarp",
          "inputs": [
            {
              "id": "t_srs",
              "var": "t_srs"
            },
            {
              "id": "format",
              "var": "format"
            },
            {
              "id": "input_file",
              "var": "tif_file"
            }
          ],
          "outputs": [
            {
              "id": "output_file",
              "var": "transformed_file"
            }
          ]
        }
      ]
    },
    {
      "type": "execute",
      "service": "gdalbuildvrt",
      "outputs": [
        {
          "id": "output_file",
          "var": "outputfile"
        }
      ],
      "inputs": [
        {
          "id": "input_file",
          "var": "warpedfiles"
        }
      ]
    },
    {
      "type": "execute",
      "service": "ctb-tile",
      "outputs": [
        {
          "id": "output_dir",
          "var": "outputdirectory",
          "store": true
        }
      ],
      "inputs": [
        {
          "id": "format",
          "var": "ctb_format"
        },
        {
          "id": "extra",
          "var": "extra1"
        },
        {
          "id": "extra",
          "var": "extra2"
        },
        {
          "id": "input_file",
          "var": "outputfile"
        }
      ]
    },
    {
      "type": "execute",
      "service": "ctb-tile",
      "outputs": [
        {
          "id": "output_dir",
          "var": "outputdirectory",
          "store": true
        }
      ],
      "inputs": [
        {
          "id": "format",
          "var": "ctb_format"
        },
        {
          "id": "extra",
          "var": "extra1"
        },
        {
          "id": "extra",
          "var": "extra2"
        },
        {
          "id": "extra",
          "var": "extra3"
        },
        {
          "id": "input_file",
          "var": "outputfile"
        }
      ]
    }
  ]
}