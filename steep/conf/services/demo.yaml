- id: sort
  name: sort
  description: Sorts files
  path: sort
  runtime: other

  parameters:

    - id: column1
      name: Column modifier
      description: Modifiers to specify column sort order
      type: input
      label: -n
      cardinality: 0..1
      data_type: string

    - id: column2
      name: Column modifier
      description: Modifiers to specify column sort order
      type: input
      cardinality: 0..1
      data_type: string

    - id: input_file
      name: Input file name
      description: Input file name
      type: input
      cardinality: 1..1
      data_type: file

    - id: output_file
      name: Output file name
      description: Output file name
      type: output
      label: -o
      cardinality: 1..1
      data_type: file
      file_suffix: ".xyz"

- id: gdal_translate
  name: Gdal Translate
  description: Converts raster data between different formats
  path: "geodata/gdal"
  runtime: docker

  runtime_args:
    - id: cleanup
      name: Cleanup container
      description: Removes container after exit
      value: "--rm"

  parameters:
    - id: gdal_translate
      name: translate command
      description: The translate command
      type: input
      cardinality: 1..1
      data_type: string
      default: gdal_translate
      # label: -q

    - id: format
      name: output format
      description: The format of the output file
      type: input
      label: -of
      cardinality: 1..1
      data_type: string

    - id: a_srs
      name: assign output projection command
      description: Override the projection for the output file. The<srs_def> may be any of the usual GDAL/OGR forms, complete WKT, PROJ.4, EPSG:n or a file containing the WKT. No reprojection is done.
      type: input
      label: -a_srs
      cardinality: 0..1
      data_type: string

    - id: creation
      name: creation option command
      description: The optional creation option of the output format
      type: input
      label: -co
      cardinality: 0..1
      data_type: string

    - id: input_file
      name: Input file name
      description: Input file name
      type: input
      cardinality: 1..1
      data_type: file

    - id: output_file
      name: Output file name
      description: Output file name
      type: output
      cardinality: 1..1
      data_type: file
      file_suffix: ".tif"

- id: gdalwarp
  name: Gdal Warp
  description: Image reprojection and warping utility
  path: "geodata/gdal"
  runtime: docker

  runtime_args:
    - id: cleanup
      name: Cleanup container
      description: Removes container after exit
      value: "--rm"

  parameters:
    - id: gdalwarp
      name: warp command
      description: The warp command
      type: input
      cardinality: 1..1
      data_type: string
      default: gdalwarp

    - id: t_srs
      name: target spatial reference
      description: The target spatial reference
      type: input
      label: -t_srs
      cardinality: 1..1
      data_type: string

    - id: s_srs
      name: source spatial reference
      description: The source spatial reference
      type: input
      label: -s_srs
      cardinality: 0..1
      data_type: string

    - id: format
      name: output format
      description: The format of the output file
      type: input
      label: -of
      cardinality: 1..1
      data_type: string

    - id: input_file
      name: Input file name
      description: Input file name
      type: input
      cardinality: 1..1
      data_type: file

    - id: output_file
      name: Output file name
      description: Output file name
      type: output
      cardinality: 1..1
      data_type: file
      file_suffix: ".tif"

- id: gdalbuildvrt
  name: Gdal buildvrt
  description: Builds a VRT from a list of datasets
  path: "geodata/gdal"
  runtime: docker

  runtime_args:
    - id: cleanup
      name: Cleanup container
      description: Removes container after exit
      value: "--rm"

  parameters:
    - id: gdalbuildvrt
      name: gdalbuildvrt command
      description: The gdalbuildvrt command
      type: input
      cardinality: 1..1
      data_type: string
      default: gdalbuildvrt
      # label: -q

    - id: output_file
      name: Output file name
      description: Output file name
      type: output
      cardinality: 1..1
      data_type: file
      file_suffix: ".vrt"

    - id: input_file
      name: Input file name
      description: Input file name
      type: input
      cardinality: 1..n
      data_type: string

- id: ctb-tile
  name: CTB Tile
  description: Cesium Terrain Builder creates a Quantized-Mesh from a VRT file
  path: "tumgis/ctb-quantized-mesh"
  runtime: docker

  runtime_args:
    - id: cleanup
      name: Cleanup container
      description: Removes container after exit
      value: "--rm"
    # - id: volume
    #   name: Volume mount
    #   description: Mount data directory containing terrain files
    #   label: "-v"
    #   value: "/tmp:/data" # may need to be changed depending on Steep working dir !!!

  parameters:
    - id: ctb-tile
      name: ctb-tile command
      description: The ctb-tile command
      type: input
      cardinality: 1..1
      data_type: string
      default: ctb-tile

    - id: format
      name: output format
      description: The format of the output file, either "Mesh" or "Terrain"
      type: input
      label: -f
      cardinality: 1..1
      data_type: string

    - id: start_zoom
      name: start zoom
      description: the zoom level to start at. This should be greater than the end zoom level
      type: input
      label: -s
      cardinality: 0..1
      data_type: string

    - id: end_zoom
      name: end zoom
      description: the zoom level to end at. This should be less than the start zoom level and >= 0
      type: input
      label: -e
      cardinality: 0..1
      data_type: string

    - id: extra
      name: extra modifiers
      description: Adds extra modifiers
      type: input
      cardinality: 0..n
      data_type: string

    - id: output_dir
      name: Output directory name
      description: Output directory name
      type: output
      label: -o
      cardinality: 1..1
      data_type: directory

    - id: input_file
      name: Input file name
      description: Input file name
      type: input
      cardinality: 1..1
      data_type: string

- id: qmconvert
  name: qmconvert
  description: Convert singleband geotiffs to quantized mesh tiles for cesium.
  path: geo-qm-convert #"/bin/triangulate/bin/triangulate"
  runtime: docker #other
  
  runtime_args:
    - id: cleanup
      name: Cleanup container
      description: Removes container after exit
      value: "--rm"

  parameters:
    - id: triangulate
      name: triangulate command
      description: The triangulate command
      type: input
      cardinality: 1..1
      data_type: string
      default: triangulate

    - id: dataLocation
      name: data location
      description: The location (single file or directory) which contains the .tif files which should be triangulated to terrain data.
      type: input
      label: --dataLocation
      cardinality: 1..1
      data_type: directory

    - id: sourceCRS
      name: source CRS
      description: The coordinate reference system of the source (to be specified when it cannot be infered from the files). Examples EPSG:4326, EPSG:25832.
      type: input
      label: --sourceCRS
      cardinality: 0..1
      data_type: directory
      default: "EPSG:4326"

    - id: maxZoom
      name: start zoom
      description: the zoom level to start at. This should be greater than the end zoom level
      type: input
      label: --maxZoom
      cardinality: 1..1
      data_type: string
      default: 18

    - id: minZoom
      name: min zoom
      description: the zoom level to end at. This should be less than the start zoom level and >= 0
      type: input
      label: --minZoom
      cardinality: 1..1
      data_type: string
      default: 0

    - id: pointResampleMethod
      name: point resample method
      description: The method used to resample the points in the data set for the specified maxZoom level. Either NearestNeighbor or Bilinear.
      type: input
      label: --pointResampleMethod
      cardinality: 0..1
      data_type: string

    - id: maxTileSize
      name: max tile size
      description: The maximum tilesize used when loading the dataset(s) into the the hadoop rdd.
      type: input
      label: --maxTileSize
      cardinality: 0..1
      data_type: string
      default: 256

    - id: output_dir
      name: Output directory name
      description: The directory where the terrain file will be created.
      type: output
      label: --cesiumTerrainDir
      cardinality: 1..1
      data_type: directory